<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>AI Fake News Detection</title>
  <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
</head>
<body>
  <header class="hero">
    <h1>üß† AI-Powered Fake News Detection</h1>
    <p>Don't believe everything you read ‚Äî verify it with our intelligent analyzer.</p>
    <a href="#analyzer" class="cta-button">Start Analyzing ‚Üì</a>
  </header>

  <section id="analyzer" class="section">
    <h2>Submit a News Story</h2>
    <form action="/prediction" method="POST">
      <textarea name="news_input" id="newsInput" placeholder="Paste news content here..." required></textarea>
      <button type="submit" id="process-btn">Analyze</button>
    </form>
    <div id="processing-indicator" class="hidden">üîç Analyzing...</div>
  </section>

  <section id="results" class="section" {% if not show_result %}style="display:none"{% endif %}>
    <h2>üßû Analysis Results</h2>

    <div class="result-header">
      <p><strong>Result:</strong>
        {% if result == "Fake News" %}
          <span class="tag-fake">Fake News ‚ö†Ô∏è</span>
        {% else %}
          <span class="tag-real">Real News ‚úÖ</span>
        {% endif %}
        <span class="confidence-badge">({{ confidence }}% confidence)</span>
      </p>
    </div>

    <div class="result-content">
      <h3>Original Content</h3>
      <div class="content-box">
        <p>{{ news_input }}</p>
      </div>

      {% if result == "Fake News" %}
      <div class="correction-section">
        <h3>üîç Correction & Verification</h3>
        <p>{{ correction }}</p>
        
        {% if correction_sources %}
          <div class="sources-list">
            {% for source in correction_sources %}
            <div class="source-card">
              <div class="source-header">
                <span class="source-name">{{ source.source }}</span>
                <span class="source-rating">{{ source.rating }}</span>
              </div>
              <a href="{{ source.url }}" target="_blank" class="source-link">
                {{ source.url[:50] }}...
              </a>
            </div>
            {% endfor %}
          </div>
        {% else %}
          <p class="no-sources">No verified sources found for this claim.</p>
          <p>Try checking these fact-checking websites:</p>
          <ul class="default-sources">
            <li><a href="https://www.snopes.com/" target="_blank">Snopes</a></li>
            <li><a href="https://www.factcheck.org/" target="_blank">FactCheck.org</a></li>
            <li><a href="https://www.politifact.com/" target="_blank">PolitiFact</a></li>
          </ul>
        {% endif %}
      </div>
      {% endif %}
    </div>
  </section>

  <section class="section">
    <h2>‚≠ê Feedback</h2>
    <p>Rate the accuracy of this result:</p>
    <div class="stars" id="star-container">
      <span class="star" data-value="1">‚òÜ</span>
      <span class="star" data-value="2">‚òÜ</span>
      <span class="star" data-value="3">‚òÜ</span>
      <span class="star" data-value="4">‚òÜ</span>
      <span class="star" data-value="5">‚òÜ</span>
    </div>
    <textarea id="feedback-text" placeholder="Write your feedback..."></textarea><br>
    <button id="submit-feedback">Submit Feedback</button>
    <div id="feedback-message"></div>
  </section>

  <footer class="footer">
    <p>¬© 2025 AI Fake News Detector | Fighting misinformation with AI</p>
  </footer>

  <script src="{{ url_for('static', filename='script.js') }}"></script>
  {% if show_result %}
  <script>
    document.getElementById('results').scrollIntoView({ behavior: 'smooth' });
  </script>
  {% endif %}
</body>
</html>